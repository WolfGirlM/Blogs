## å‰è¨€ï¼š

é¡¹ç›®ä¸­é‡åˆ°ä¸€ä¸ªéœ€æ±‚ï¼Œå°†Yè½´æ•°æ®æºä¸­çš„ä¸åŒå­—æ®µç”¨å¯¹åº”çš„è‡ªå®šä¹‰å›¾æ ‡å±•ç¤ºï¼Œæ­£å¥½Echartsæ”¯æŒè‡ªå®šä¹‰ç³»åˆ—å›¾è¡¨ï¼Œå®ç°èµ·æ¥æŒºæ–¹ä¾¿~

æ‰€ä»¥æˆ‘åˆè‡ªå·±åšäº†ä¸€ä¸ªå°æ —å­ï¼Œæ€»ç»“ä¸€ä¸‹Echartsè‡ªå®šä¹‰ç³»åˆ—çš„ç”¨æ³•ã€‚

è¿™æ˜¯ä¸‹æ–‡ä¾‹å­çš„æˆå“demoï¼ŒåŒ…å«ä¸¤ä¸ªç³»åˆ—(series)çš„Echartså›¾ï¼Œå…¶ä¸­ä¸€ä¸ªæ˜¯æ™®é€šçš„æŠ˜çº¿å›¾ï¼Œå¦ä¸€ä¸ªåˆ™æ˜¯æ ¹æ®æ•°æ®è‡ªå®šä¹‰çš„ç³»åˆ—(ä¸åŒæ•°æ®ç”¨ä¸åŒå›¾æ ‡å±•ç¤º)ã€‚

> æºç ä¼ é€é—¨: [ç‚¹æˆ‘ğŸ¤ ](https://github.com/WolfGirlM/EchartsDemos)



![](https://user-gold-cdn.xitu.io/2020/7/9/173314931f08b53e?w=966&h=711&f=png&s=18986)
## ä¸€ã€Echartsè‡ªå®šä¹‰ç³»åˆ—ç®€ä»‹

åœ¨Echartsä¸­ï¼Œæ¯ä¸ªseries(ç³»åˆ—)å¯ä»¥é€šè¿‡typeå†³å®šæ˜¯å“ªç§å›¾è¡¨ç±»å‹ï¼Œå®˜æ–¹ç›®å‰æ”¯æŒ[22ç§ä¸åŒçš„typeç±»å‹](https://echarts.apache.org/zh/option.html#series)ã€‚è‡ªå®šä¹‰ç±»å‹`custom`å±äºå…¶ä¸­çš„ä¸€ç§ã€‚

è‡ªå®šä¹‰ç³»åˆ—æ”¯æŒå¼€å‘è€…è‡ªå®šä¹‰å›¾è¡¨ä¸­éœ€è¦æ¸²æŸ“å“ªç§å›¾å½¢å…ƒç´ ï¼Œæ ¸å¿ƒAPIå¦‚ä¸‹:
```
series: [
  {
    type: custom, //æŒ‡å®šç³»åˆ—ç±»å‹ä¸ºè‡ªå®šä¹‰ç±»å‹
    name: 'è‡ªå®šä¹‰ç³»åˆ—', //æŒ‡å®šç³»åˆ—çš„åç§°
    renderItem: renderItem,//é…ç½®è‡ªå®šä¹‰ç³»åˆ—çš„å†…å®¹
    data: data
  }
]
```
å…¶ä¸­ï¼Œæœ€é‡è¦çš„é…ç½®é¡¹ä¸º`renderItem`é…ç½®é¡¹(ç±»å‹ä¸ºå‡½æ•°)ï¼Œå›¾è¡¨çš„æ¯ä¸€é¡¹æ•°æ®åœ¨è¿›è¡Œæ¸²æŸ“æ—¶éƒ½ä¼šè°ƒç”¨è¯¥å‡½æ•°ï¼Œå¹¶è¿”å›è‡ªå®šä¹‰çš„å›¾è¡¨å†…å®¹ï¼š
```
  let renderItem = function(params, api) {
      console.log(params, "renderItem_params");
      console.log(api, "renderItem_api");
  }
 ```
 
## äºŒã€è‡ªå®šä¹‰ç³»åˆ—é…ç½®é¡¹è¯´æ˜

###  renderItemå½¢å‚è¯´æ˜

renderItemæ”¯æŒä¸¤ä¸ªå‚æ•°: `params`ã€`api`ï¼š

`params`å‚æ•°è¿”å›æ¯é¡¹dataæ•°æ®é¡¹çš„ä¿¡æ¯åŠåæ ‡ç³»çš„ä¿¡æ¯:

![](https://user-gold-cdn.xitu.io/2020/7/9/17333c65631da75d?w=868&h=511&f=png&s=40211)

`api`å‚æ•°ä¸»è¦è¿”å›ä¸€äº›æ–¹æ³•API([æ–‡æ¡£ä¼ é€é—¨](https://echarts.apache.org/zh/option.html#series-custom.renderItem.arguments.api)):

![](https://user-gold-cdn.xitu.io/2020/7/9/17333cd3525e5039?w=657&h=309&f=png&s=26823)

å…¶ä¸­ï¼Œ**æœ€å¸¸ç”¨**çš„ä¸¤ä¸ªAPIä¸ºï¼š

> api.value()--å–å‡º dataItem ä¸­çš„æ•°å€¼

> api.coord()--è¿›è¡Œåæ ‡è½¬æ¢è®¡ç®—

ä¾‹å¦‚seriesçš„dataé¡¹æ•°æ®ä¸º[1,2,3,4]ï¼Œæ‰“å°å‡ºapi.value()çš„å€¼å¦‚ä¸‹:

![](https://user-gold-cdn.xitu.io/2020/7/9/17333ce8458eeb3c?w=188&h=115&f=png&s=2917)


api.coord()æœ€å¸¸ç”¨çš„åŠŸèƒ½ä¸ºå°†api.value()è·å–åˆ°çš„æ•°å€¼è½¬æ¢ä¸ºå¯¹åº”çš„åæ ‡ç‚¹ï¼Œä»¥ä¾¿å°†å›¾å½¢ç»˜åˆ¶åˆ°å›¾è¡¨ä¸­ï¼š


![](https://user-gold-cdn.xitu.io/2020/7/9/17333ced65d49d16?w=699&h=116&f=png&s=15132)

### renderItem-returné¡¹è¯´æ˜

renderItemé€šè¿‡`return`å…³é”®å­—è¿”å›ä¸€ä¸ª**å›¾å½¢å¯¹è±¡**ï¼Œå¹¶åœ¨å…¶ä¸­æŒ‡å®šå…·ä½“çš„å›¾å½¢å†…å®¹ï¼Œå¦‚æœä»€ä¹ˆéƒ½ä¸æ¸²æŸ“ï¼Œå¯ä»¥ä¸è¿”å›ä»»ä½•ä¸œè¥¿(ç›´æ¥return)ã€‚
```
 let renderItem = function(params, api) {
     return {
       type: '', //æŒ‡å®šå›¾å½¢çš„ç±»å‹
       //æŒ‡å®šå›¾å½¢çš„å°ºå¯¸ã€åæ ‡è½´ç›¸å¯¹ä½ç½®
       shape: {
          x: x, 
          y: y,
          width: width,
          height: height
       },
       //æŒ‡å®šå›¾å½¢çš„ç»†èŠ‚æ ·å¼
       style: api.style({
          lineWidth: 1
       }) 
     }
  }
 ```
 
## ä¸‰ã€å®æˆ˜


åœºæ™¯å‡è®¾ï¼šseriesä¸­çš„dataæ•°æ®ä¸º[1,2,3,4],ç°åœ¨ä¸ºæ¯ä¸ªæ•°æ®é¡¹è®¾ç½®ä¸åŒçš„è‡ªå®šä¹‰å›¾æ ‡ã€‚å³æ•°å­—1åˆ°4éœ€è¦ç”¨ç›¸åº”çš„å›¾æ ‡æ¸²æŸ“è‡³å›¾è¡¨ä¸­ã€‚

é¦–å…ˆï¼ŒæŒ‡å®šä¸¤ä¸ªç³»åˆ—ï¼Œå°†å…¶ä¸­ä¸€ä¸ªç³»åˆ—ç±»å‹è®¾ç½®ä¸ºè‡ªå®šä¹‰ç±»å‹(å…¶ä¸­ç±»å‹ä¸ºæŠ˜çº¿å›¾çš„ç³»åˆ—åªä½œä¸ºæ™®é€šå›¾è¡¨ä½œä¸ºå¯¹ç…§ï¼Œä¸éœ€è¦è¿‡å¤šå…³æ³¨ã€‚ï¼‰

```
let series = [
    {
      name: "æ™®é€šæŠ˜çº¿",
      type: "line",
      data: [1, 2, 3, 4]
    },
    {
      name: "è‡ªå®šä¹‰ç³»åˆ—",
      type: "custom",
      renderItem: renderItem,
      yAxisIndex: 1,
      data: [1, 2, 3, 4]
    },
 ];

```
 
 æ¥ä¸‹æ¥ï¼Œåˆ°äº†é‡å¤´æˆç¯èŠ‚ï¼Œé…ç½®`renderItem`å‡½æ•°:
  
 **ç¬¬ä¸€æ­¥ï¼Œåˆ©ç”¨åæ ‡è½¬æ¢APIå°†æ•°æ®è½¬æ¢ä¸ºåæ ‡è½´å¯¹åº”çš„ç‚¹çš„ä½ç½®:**
 ```
  let renderItem = function(params, api) {
      let point = api.coord([api.value(0), api.value(1)]);
    }
 ```
 
 **ç¬¬äºŒæ­¥ï¼Œåˆ©ç”¨è·å–æ•°æ®çš„APIè¿›è¡Œåˆ¤æ–­ï¼Œå¹¶æŒ‡å®šå¯¹åº”çš„æ•°æ®æ‰€éœ€æ¸²æŸ“çš„å›¾æ ‡å†…å®¹**
 
 æœ¬ä¾‹ä¸­ï¼Œé€‰å–`return_path`çš„å›¾æ ‡æ¸²æŸ“æ–¹å¼ï¼Œå³ä½¿ç”¨ `SVG PathData` åšå›¾æ ‡çš„è·¯å¾„è¿›è¡Œæ¸²æŸ“ï¼Œè¿™ç§æ–¹å¼å¯ä»¥ç”¨æ¥ç»˜åˆ¶ç¬¬ä¸‰æ–¹å›¾æ ‡åŠå…¶ä»–å„ç§å›¾å½¢ã€‚
 
 æ¯”å¦‚ï¼Œä»[é˜¿é‡Œå·´å·´çŸ¢é‡å›¾æ ‡åº“](https://www.iconfont.cn/)ä¸­å¼•å…¥SVGå›¾æ ‡çš„æ–¹å¼å¦‚ä¸‹ï¼š
 
 æ­¥éª¤1ï¼š ä»å®˜ç½‘å¤åˆ¶SVGä»£ç 
 
![](https://user-gold-cdn.xitu.io/2020/7/9/17333ed1deaffc9a?w=643&h=560&f=png&s=41591)

 æ­¥éª¤2ï¼šå°†ä»£ç ä¸­pathæ ‡ç­¾é‡Œçš„`då±æ€§`ä¸­çš„å†…å®¹æå–å‡ºæ¥ï¼Œæ­¤å³ä¸ºæˆ‘ä»¬éœ€è¦çš„SVGè·¯å¾„
 
 
 
![](https://user-gold-cdn.xitu.io/2020/7/9/17333f0cb4007a11?w=1003&h=140&f=png&s=24804)

æŒ‡å®šå¥½å›¾æ ‡å†…å®¹åï¼Œå¯ä»¥åˆ©ç”¨`api.style()`å¯¹å›¾æ ‡å†è¿›è¡Œç»†èŠ‚çš„æ ·å¼ä¼˜åŒ–ï¼š
 
 ```
 let renderItem = function(params, api) {
    let point = api.coord([api.value(0), api.value(1)]);
    //æ ¹æ®dataä¸­çš„æ•°æ®æŒ‡å®šéœ€è¦æ¸²æŸ“çš„å›¾æ ‡
    if (api.value(0) == 1) {
      return {
        //å›¾æ ‡ç±»å‹ä¸ºpathç±»å‹ï¼Œé€šè¿‡SVGä»£ç å¼•å…¥ç¬¬ä¸‰æ–¹å›¾æ ‡
        type: "path",
        shape: {
          pathData: "",
          x: params.coordSys.x / 30,
          y: params.coordSys.y / 60,
          width: 30,
          height: 30,
        },
        position: point,
        style: api.style({
          fill: "red",
          lineWidth: 1,
        }),
      };
    }
}
 
 ```
 
é‡å¤ä¸Šè¿°é€»è¾‘ï¼Œå³å¯å®Œæˆå¯¹æ•°æ®è¿›è¡Œè‡ªå®šä¹‰å›¾æ ‡çš„æ¸²æŸ“å•¦~~
 
 
 
 
> æºç ä¼ é€é—¨: [ç‚¹æˆ‘ğŸ¤ ](https://github.com/WolfGirlM/EchartsDemos)
